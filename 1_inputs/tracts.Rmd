---
title: "_Dataset_ | Census Tracts"
author: "Tiernan Martin, [Futurewise](http://www.futurewisewa.org/)"
df_print: tibble
output:
  html_notebook: default
  pdf_document:
    keep_tex: yes
subtitle: Communities of Opportunity Displacement Risk Assessment
always_allow_html: yes
---

###Introduction
The primary geographic unit of this assessment is the [census tract](https://www.census.gov/geo/reference/gtc/gtc_ct.html). As is the case with many communities, the census geographies do not coincide exactly with the formal geographic boundary of the study's three sites, and should be considered as _spatial approximations_ of these communities.

Listed below are the geographic identifiers of the census tracts that approximate each site.



```{r, echo = FALSE, results="asis", warning=FALSE,message=FALSE}
library(tidyverse)
library(webshot)
library(knitr)
library(tigris)
library(miscgis)

# Rainier Valley
rv <- c("53033010001", "53033010300", "53033010401", "53033011001", "53033011002", "53033011101","53033011102", "53033011700", "53033011800", "53033011900")

# White Center
wc <- c("53033026600","53033026700","53033026500","53033026801","53033026802","53033027000")

# Seatac

stc_hus <- read_csv("./1_raw/seatac_hus/DEC_10_SF1_H1_with_ann.csv", 
                    col_types = cols(Id2 = col_character()), skip = 1)

stc <-  paste(substr(x = stc_hus$Id2,1,2),substr(x = stc_hus$Id2,8,16),sep = "")

df <- miscgis::cbind_fill(rv,wc,stc) %>% 
        as_tibble() %>% 
        `colnames<-`(c("Rainier Valley",
                       "White Center",
                       "SeaTac"))

knitr::kable(df,caption = "Census Tract GEOIDs")
```

###Spatial Polygons

####With Waterbodies
Left to right: Rainier Valley, White Center, SeaTac
<br></br>

```{r, echo=FALSE,message=FALSE,fig.height=1.25, fig.width=1,  fig.show='hold', dpi=150,fig.cap='Rainier Valley, White Center, and SeaTac'}

library(htmltools)
library(htmlwidgets)
library(leaflet)
library(gplots)
library(ggmap)
library(rgeos)


tr <- tigris::tracts(state = "WA",county = "King", year = 2014)

tr_sel <- tr[tr$GEOID %in% c(rv,wc,stc),]

cntr <- tr_sel %>% gCentroid(byid = TRUE) %>% gCentroid()



blue <- miscgis::miscgis_pals$tableau_cat[["blue"]]
green <- miscgis::miscgis_pals$tableau_cat[["green"]]
red <- miscgis::miscgis_pals$tableau_cat[["red"]]


# Rainier Valley
        
rv_map <- miscgis::myLfltGrey() %>%
        addPolygons(data = tr_sel[tr_sel$GEOID %in% rv,],
                    smoothFactor = 0,
                    color = col2hex("white"),
                    weight = .5,
                    opacity = 1,
                    fillColor = blue,
                    fillOpacity = .65
        ) %>% 
        setView(cntr$x,cntr$y,zoom = 9) %>% 
        miscgis::styleWidget(style = "float:left;margin:1px")



# White Center


wc_map <- miscgis::myLfltGrey() %>%
        addPolygons(data = tr_sel[tr_sel$GEOID %in% wc,],
                    smoothFactor = 0,
                    color = col2hex("white"),
                    weight = .5,
                    opacity = 1,
                    fillColor = green,
                    fillOpacity = .65
        ) %>% 
        setView(cntr$x,cntr$y,zoom = 9) %>% 
        miscgis::styleWidget(style = "float:left;margin:1px")

# SeaTac

stc_map <- miscgis::myLfltGrey() %>%
        addPolygons(data = tr_sel[tr_sel$GEOID %in% stc,],
                    smoothFactor = 0,
                    color = col2hex("white"),
                    weight = .5,
                    opacity = 1,
                    fillColor = red,
                    fillOpacity = .65
        ) %>% 
        setView(cntr$x,cntr$y,zoom = 9) %>% 
        miscgis::styleWidget(style = "float:none;margin:1px")

rv_map
wc_map
stc_map


```


####Without Waterbodies
Left to right: Rainier Valley, White Center, SeaTac
<br></br>

```{r, echo=FALSE,message=FALSE,fig.height=1.25, fig.width=1,  fig.show='hold', dpi=150,fig.cap='Rainier Valley, White Center, and SeaTac'}





```





